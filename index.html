<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>CB AI Agent Chat - Tailwind Version</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style type="text/css">
    /* WebChat ရဲ့ inner element တွေကို override လုပ်ဖို့ style အနည်းငယ် လိုအပ်ပါသေးတယ် */
    #webchat {
      height: 100%;
      width: 100%;
    }
    /* Hide citations/references as requested */
    .webchat__render-markdown__pure-identifier,
    .webchat__render-markdown__citation,
    .webchat__citation,
    .webchat__link-definitions__list, 
    .webchat__link-definitions__header,
    button.webchat__link-definitions__list-item {
      display: none !important;
    }
    
    /* Custom Scrollbar for transcript */
    [role="main"] .webchat__basic-transcript__scrollable {
      padding-bottom: 100px !important;
    }

    /* Floating Animation for Panel */
    .cb-panel {
      transition: transform 0.3s ease-in-out;
    }
    .panel-closed {
      transform: translateX(100%);
    }
    .panel-open {
      transform: translateX(0);
    }
  </style>
</head>
<body class="bg-gray-100 h-screen overflow-hidden">

<div id="cb-ai-wrapper">
  <div id="chat-launcher" 
       onclick="openCbChat()"
       class="fixed bottom-6 right-6 z-[10001] flex items-center bg-white border border-gray-300 rounded-xl p-2 pl-4 cursor-pointer shadow-lg hover:shadow-xl transition-all">
    <img alt="CB" class="w-8 h-8 object-contain" src="https://play-lh.googleusercontent.com/7E8SgT9CCbsd73Vnbr3cD9E5a2LIiNaKL9cGhWHXq4JuTJd7mxu4DkF1-yI74APnqog" />
    <span class="font-semibold text-base mx-4 text-black hidden sm:inline">CB AI Agent</span>
    <div class="bg-[#0242bd] w-9 h-9 rounded-lg flex items-center justify-center text-white text-xl font-bold">
      +
    </div>
  </div>

  <div id="cb-chat-panel" 
       class="fixed inset-0 sm:inset-auto sm:right-0 sm:bottom-0 z-[10002] bg-white flex flex-col shadow-2xl transition-transform duration-300 panel-closed 
              w-full h-full sm:w-[420px] sm:h-[90vh] sm:max-h-[800px] sm:rounded-tl-2xl sm:border-l sm:border-t border-black">
    
    <div class="bg-[#221C9E] text-white px-5 py-3 flex justify-between items-center shrink-0 sm:rounded-tl-xl">
      <div class="flex items-center gap-3">
        <img alt="CB Logo" class="w-16 h-10 object-contain" src="data:image/png;base64,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" /> 
        <span class="font-bold text-lg">CB AI Agent</span>
      </div>
      <div class="text-3xl cursor-pointer leading-none hover:text-gray-300" onclick="closeCbChat()">&times;</div>
    </div>

    <div class="flex-1 bg-white relative overflow-hidden">
      <div id="webchat" role="main"></div>
      
      <div class="absolute bottom-[80px] left-0 w-full bg-white border-t border-black px-2 py-1 text-right z-10">
        <i class="text-[10px] text-gray-500">This message is generated by AI to provide faster assistance.</i>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.botframework.com/botframework-webchat/latest/webchat.js"></script>

<script>
  const botSecret = "SECRET_PLACEHOLDER";
  const panel = document.getElementById('cb-chat-panel');
  const launcher = document.getElementById('chat-launcher');

  function openCbChat() {
    panel.classList.remove('panel-closed');
    panel.classList.add('panel-open');
    launcher.classList.add('hidden');
    renderCbChat();
  }

  function closeCbChat() {
    panel.classList.remove('panel-open');
    panel.classList.add('panel-closed');
    setTimeout(() => {
      launcher.classList.remove('hidden');
    }, 300);
  }

  let hasRendered = false;

  function renderCbChat() {
    if (hasRendered) return;
    hasRendered = true;

    // Tailwind-like configuration for WebChat components
    const styleOptions = {
      accent: '#0242bd',
      bubbleBackground: '#f5fbfc',
      bubbleTextColor: '#000000',
      bubbleBorderRadius: 12,
      bubbleFromUserBackground: '#e0faff',
      bubbleFromUserBorderColor: '#d1d1d1',
      bubbleFromUserBorderRadius: 12,
      
      // Send Box Styling
      sendBoxHeight: 50,
      sendBoxBackground: '#ffffff',
      sendBoxPlaceholderColor: '#666',
      sendBoxTextColor: '#000000',
      
      hideUploadButton: true,
      suggestedActionLayout: 'stacked',
      
      // Responsive font sizes
      fontSizeSmall: '12px',
      rootFontSize: '14px'
    };

    const store = window.WebChat.createStore({}, ({ dispatch }) => next => action => {
      if (action.type === 'DIRECT_LINE/CONNECT_FULFILLED') {
        dispatch({
          type: 'WEB_CHAT/SEND_EVENT',
          payload: { name: 'startConversation', value: '' }
        });
      }
      return next(action);
    });

    window.WebChat.renderWebChat({
      directLine: window.WebChat.createDirectLine({ secret: botSecret }),
      store: store,
      styleOptions: styleOptions
    }, document.getElementById('webchat'));
  }
</script>

</body>
</html>
